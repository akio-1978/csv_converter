# j2shrine

- j2shrine は jinja2 をコマンドラインで実行するツールです。
- データを読み込んで、内容を引数として jinja2 を実行します。
- 入力データとして csv や Excel を扱えることが特徴です。
  - version0.1.0 現在では csv、Excel、json の 3 つの形式に対応しています。

この readme の中身は随時整理していきます。

## 動作環境

python3.8 以上

## インストール

```sh
pip install pip install git+https://github.com/akio-1978/j2shrine
```

## コマンド構文

コマンドの基本的な構文は以下の形になっています。

```
j2shrine [サブコマンド] [テンプレート] [入力ファイル] [オプション]
```

オプションは全入力フォーマットに共通するものと、特定の入力フォーマットに固有のものがあります。

### 入力フォーマット

以下の 3 種類から指定します。操作方法については順次追記します

- [CSV ファイル](csv/tutorial.md)
- excel ファイル
- json ファイル

### 共通のオプション

全入力フォーマットに共通するオプションです。

| 短い形式 | 長い形式          | 引数                              | デフォルト | 効果                                                                                             |
| -------- | ----------------- | --------------------------------- | ---------- | ------------------------------------------------------------------------------------------------ |
| -O       | --output          | ファイル名                        | sys.stdout | 出力先を指定します                                                                               |
|          | --input-encoding  | 文字エンコーディング              | utf-8      | 入力データの文字エンコーディング                                                                 |
|          | --output-encoding | 文字エンコーディング              | utf-8      | 出力データの文字エンコーディング                                                                 |
| -p       | --parameters      | KEY=VALUE 形式の文字列 複数指定可 |            | テンプレートに直接引数を与えます<br>この値はテンプレート中で`params.KEY.VALUE`として参照できます |
| -h       | --help            |                                   |            | ヘルプを表示します                                                                               |

##### カスタムフィルター

j2shrine では各種入力ファイルの性質に合わせた処理を行うためのいくつかのカスタムフィルタを用意しています。詳細は各ファイル形式の使用例で解説します。

## j2shrine という名前

既に同じ目的のソフトウェアが多数作られていて、思いつく名前が既に使われておりていたので、j2shrine としました。
jinja2 が日本語の「寺」から命名されたそうなので「寺は temple、神社は shrine だよ」ということで j2shrine です。
